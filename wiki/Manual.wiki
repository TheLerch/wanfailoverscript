#summary Manual
#labels Featured

= Design =

== Assumption ==

I asume that your host has access to two different routers that act as the primary and backup gateway for the primary WAN connection and backup connection. It may be that your host has two interfaces, with two IP-addresses for each WAN connection, but this is not required.

== Link availability test ==

WFS tests for the availability of the primary WAN link by sending ICMP (PING) messages to user-specified target hosts. Two target hosts must be configured. If a host goes down, while our WAN connection is just perfectly fine, we don't want a failover. Thus, as a sanity check, a second host must be tested.

== Failover ==

WFS changes the default gateway and thus the default route to which all traffic is sent. It uses the native 'route' command found on most Linux distros.

== Restore primary WAN link ==

When executed, WFS adds static routes for the two target hosts that are used for availability monitoring. These routes specifically use the router/gateway for the primary WAN interface, even if the default gateway is switched to the failover connection. 

This allows WFS to monitor if the primary WAN interface is still down or back up again. If the latter is true, then WFS will switch the default route back to the primary interface.
